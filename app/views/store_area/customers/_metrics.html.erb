<%# Charts Card %>
<div class="card border-0 shadow-sm mb-4">
  <div class="card-header bg-white border-0 py-3">
    <h4 class="card-title mb-0">Análise de Clientes</h4>
  </div>
  <div class="card-body">
    <div class="row">
      <%# Total customers card %>
      <div class="col-md-3">
        <div class="card border-0 shadow-sm mb-4">
          <div class="card-body">
            <h6 class="card-title text-muted mb-2">Total de Clientes</h6>
            <h3 class="mb-0"><%= @customers.total_count %></h3>
            <div class="small text-medium-emphasis mt-2">
              <%= period_text %>
            </div>
          </div>
        </div>
      </div>

      <%# Registration chart %>
      <div class="col-md-9">
        <div class="card border-0 shadow-sm mb-4">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <div>
                <h5 class="card-title mb-0">Evolução de Cadastros</h5>
                <div class="small text-medium-emphasis">
                  <%= period_text %>
                </div>
              </div>
            </div>
            <div class="mt-3" style="height: 300px;">
              <%= line_chart @customers_by_day, 
                colors: ["#321fdb"],
                library: {
                  plugins: {
                    legend: {
                      position: 'bottom'
                    }
                  },
                  scales: {
                    y: {
                      beginAtZero: true,
                      ticks: {
                        stepSize: 1
                      }
                    }
                  }
                } %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 